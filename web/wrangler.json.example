{
  "$schema": "node_modules/wrangler/config-schema.json",
  "name": "ai-news",
  "main": "worker.mjs",
  "compatibility_date": "2025-12-01",
  "compatibility_flags": ["nodejs_compat", "global_fetch_strictly_public"],
  "assets": {
    "directory": ".open-next/assets",
    "binding": "ASSETS"
  },
  "vars": {
    "SITE_URL": "http://localhost:3000",
    "NEXT_PUBLIC_SITE_URL": "http://localhost:3000",
    "NEXT_PUBLIC_SITE_NAME": "AI News",
    "RATE_LIMIT_ENABLED": "true",
    "RATE_LIMIT_PUBLIC_REQUESTS": "60",
    "RATE_LIMIT_PUBLIC_WINDOW": "60",
    "RATE_LIMIT_SEARCH_REQUESTS": "20",
    "RATE_LIMIT_SEARCH_WINDOW": "60",
    "RATE_LIMIT_INGEST_REQUESTS": "10",
    "RATE_LIMIT_INGEST_WINDOW": "60",
    "RATE_LIMIT_ADMIN_REQUESTS": "30",
    "RATE_LIMIT_ADMIN_WINDOW": "60",
    "RATE_LIMIT_ITEM_REQUESTS": "100",
    "RATE_LIMIT_ITEM_WINDOW": "60",
    "ALLOWED_ORIGINS": "http://localhost:3000,https://bestblogs.dev,https://staging.bestblogs.dev",
    "CSP_ENABLED": "true",
    "JWT_ISSUER": "bestblogs.dev",
    "CRAWLER_ENABLED": "false",
    "EMAIL_WORKER_ENABLED": "false",
    "CRAWLER_SOURCES_PER_BATCH": "50",
    "CRAWLER_ITEMS_PER_SOURCE": "20",
    "CRAWLER_CONCURRENCY": "5",
    "CRAWLER_MAX_RETRIES": "3",
    "JINA_READER_PREFIX": "https://r.jina.ai/http://",
    "JINA_TIMEOUT": "30000",
    "QUEUE_BATCH_SIZE": "10",
    "QUEUE_MAX_RETRIES": "5",
    "QUEUE_RETRY_DELAY": "60000",
    "HIGH_PRIORITY_TYPES": "article,blog,news",
    "MEDIUM_PRIORITY_TYPES": "podcast,video",
    "LOW_PRIORITY_TYPES": "twitter,newsletter,wechat",
    "ANTHROPIC_MODEL": "claude-3-5-haiku-20241022",
    "GEMINI_MODEL": "gemini-1.5-flash-001"
  },
  "services": [
    {
      "binding": "WORKER_SELF_REFERENCE",
      "service": "ai-news"
    }
  ],
  "d1_databases": [
    {
      "binding": "DB",
      "database_name": "ai_news_db",
      "database_id": "YOUR_D1_DATABASE_ID"
    }
  ],
  "r2_buckets": [
    {
      "binding": "NEXT_INC_CACHE_R2_BUCKET",
      "bucket_name": "ai-news-cache"
    },
    {
      "binding": "R2",
      "bucket_name": "ai-news-images"
    }
  ],
  "images": {
    "binding": "IMAGES"
  },
  "kv_namespaces": [
    {
      "binding": "RATE_LIMIT_KV",
      "id": "YOUR_RATE_LIMIT_KV_ID",
      "preview_id": "YOUR_RATE_LIMIT_KV_PREVIEW_ID"
    },
    {
      "binding": "LOGS",
      "id": "YOUR_LOGS_KV_ID",
      "preview_id": "YOUR_LOGS_KV_PREVIEW_ID"
    },
    {
      "binding": "METRICS",
      "id": "YOUR_METRICS_KV_ID",
      "preview_id": "YOUR_METRICS_KV_PREVIEW_ID"
    },
    {
      "binding": "ERROR_TRACKING",
      "id": "YOUR_ERROR_TRACKING_KV_ID",
      "preview_id": "YOUR_ERROR_TRACKING_KV_PREVIEW_ID"
    },
    {
      "binding": "WEB_VITALS_KV",
      "id": "YOUR_WEB_VITALS_KV_ID",
      "preview_id": "YOUR_WEB_VITALS_KV_PREVIEW_ID"
    },
    {
      "binding": "QUERY_CACHE",
      "id": "YOUR_QUERY_CACHE_KV_ID",
      "preview_id": "YOUR_QUERY_CACHE_KV_PREVIEW_ID"
    }
  ],
  "triggers": {
    "crons": ["5 * * * *", "10 */3 * * *", "15 */6 * * *"]
  }
}
